<section class="contact-section" id="contact">
  <h2>{{'HOME.CONTACT.title' | translate }}</h2>

  @if (isSuccess === undefined && !isProcessing) {
    <form [formGroup]="contactForm" (ngSubmit)="sendContact()">
      <div class="form-group">
        <label for="name">{{'HOME.CONTACT.fullname-label' | translate }}*</label>
        <input id="name" type="text" placeholder="{{'HOME.CONTACT.fullname-placeholder' | translate }}" formControlName="name" />
        @if (contactForm.get('name')?.touched && contactForm.get('name')?.invalid) {
          @if (contactForm.get('name')?.errors?.['required']) {
            <small>{{'HOME.CONTACT.fullname-validation-null' | translate }}</small>
          }
          @if (contactForm.get('name')?.errors?.['maxlength']) {
            <small>{{'HOME.CONTACT.fullname-validation-maximum' | translate }}</small>
          }
        }
      </div>

      <div class="form-group">
        <label for="companyName">{{'HOME.CONTACT.company.name-label' | translate }}</label>
        <input id="companyName" type="text" placeholder="{{'HOME.CONTACT.company.name-placeholder' | translate }}" formControlName="companyName" />
        @if (contactForm.get('companyName')?.touched && contactForm.get('companyName')?.invalid) {
          @if (contactForm.get('companyName')?.errors?.['maxlength']) {
            <small>{{'HOME.CONTACT.company.name-validation-maximum' | translate }}</small>
          }
        }
      </div>

      <div class="form-group">
        <label for="email">{{'HOME.CONTACT.email-label' | translate }}*</label>
        <input id="email" type="email" placeholder="{{'HOME.CONTACT.email-placeholder' | translate }}" formControlName="email" />
        @if (contactForm.get('email')?.touched && contactForm.get('email')?.invalid) {
          @if (contactForm.get('email')?.errors?.['required']) {
            <small>{{'HOME.CONTACT.email-validation-null' | translate }}</small>
          }
          @if (contactForm.get('email')?.errors?.['email']) {
            <small>{{'HOME.CONTACT.email-validation-invalid' | translate }}</small>
          }
          @if (contactForm.get('email')?.errors?.['maxlength']) {
            <small>{{'HOME.CONTACT.email-validation-maximum' | translate }}</small>
          }
        }
      </div>

      <div class="form-group">
        <label for="idea">{{'HOME.CONTACT.idea-label' | translate }}*</label>
        <textarea id="idea" rows="4" placeholder="{{'HOME.CONTACT.idea-placeholder' | translate }}" formControlName="idea"></textarea>
        @if (contactForm.get('idea')?.touched && contactForm.get('idea')?.invalid) {
          @if (contactForm.get('idea')?.errors?.['required']) {
            <small>{{'HOME.CONTACT.idea-validation-null' | translate }}</small>
          }
          @if (contactForm.get('idea')?.errors?.['minlength']) {
            <small>{{'HOME.CONTACT.idea-validation-minimum' | translate }}</small>
          }
          @if (contactForm.get('idea')?.errors?.['maxlength']) {
            <small>{{'HOME.CONTACT.idea-validation-maximum' | translate }}</small>
          }
        }
      </div>

      <div class="form-group">
        <label for="additionalInfo">{{'HOME.CONTACT.additional.explanation-label' | translate }}</label>
        <textarea id="additionalInfo" rows="4" placeholder="{{'HOME.CONTACT.additional.explanation-placeholder' | translate }}" formControlName="additionalInfo"></textarea>
        @if (contactForm.get('additionalInfo')?.touched && contactForm.get('additionalInfo')?.invalid) {
          @if (contactForm.get('additionalInfo')?.errors?.['maxlength']) {
            <small>{{'HOME.CONTACT.additional.validation-maximum' | translate }}</small>
          }
        }
      </div>

      <button type="submit" [disabled]="contactForm.invalid">{{'HOME.CONTACT.button.submit-text' | translate }}</button>
    </form>
  }
  @else if (isProcessing) {
    <ng-lottie class="animation loading" [options]="loadingAnimation"></ng-lottie>
    <p>{{'HOME.CONTACT.text.loading' | translate }}</p>
  }
  @else if (!isSuccess) {
    <ng-lottie class="animation" [options]="errorAnimation"></ng-lottie>
    <p>{{ errorMessage }}</p>

    <button (click)="resetForm()">{{'HOME.CONTACT.button.retry-text' | translate }}</button>
  }
  @else {
    <ng-lottie class="animation" [options]="successAnimation" (animationCreated)="handleAnimationCreated($event, 0.8)"></ng-lottie>
    <p>{{'HOME.CONTACT.text.success' | translate }}</p>
  }
</section>
